# AttentionSync Environment Configuration
# Copy this file to .env and update with your values

# ============================================
# REQUIRED CONFIGURATIONS
# ============================================

# Database Configuration
POSTGRES_DB=attentionsync
POSTGRES_USER=attentionsync
POSTGRES_PASSWORD=changeme-in-production
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgresql://attentionsync:changeme-in-production@localhost:5432/attentionsync

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379/0

# Security Keys (Generate strong random keys for production!)
SECRET_KEY=your-secret-key-here-change-in-production
JWT_SECRET=your-jwt-secret-here-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# AI Service Configuration (At least one required)
# Claude API (Recommended)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# OpenAI API (Alternative)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# Local LLM (Optional)
LOCAL_LLM_ENABLED=false
LOCAL_LLM_MODEL_PATH=
LOCAL_LLM_DEVICE=cpu

# ============================================
# OPTIONAL CONFIGURATIONS
# ============================================

# Application Settings
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
TIMEZONE=Asia/Shanghai
DEFAULT_LANGUAGE=zh-CN

# API Server Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
API_RATE_LIMIT=100/minute

# Web Frontend Configuration
WEB_PORT=3000
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NEXT_TELEMETRY_DISABLED=1

# MinIO Object Storage (S3-compatible)
MINIO_ENDPOINT=localhost:9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_DEFAULT_BUCKETS=attentionsync
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# Audio/Video Transcription
WHISPER_MODEL=base
WHISPER_DEVICE=cpu
WHISPER_LANGUAGE=auto
FUNASR_ENABLED=false
FUNASR_MODEL_PATH=

# Content Processing
MAX_CONTENT_LENGTH=100000
SUMMARY_MAX_TOKENS=500
SUMMARY_MAX_LENGTH=200
CLUSTERING_MIN_ITEMS=2
DEDUP_THRESHOLD=0.8

# Crawler Settings
USER_AGENT=AttentionSync/1.0 (+https://github.com/attentionsync/attentionsync)
CRAWLER_TIMEOUT=30
CRAWLER_MAX_RETRIES=3
CRAWLER_DELAY=1
RESPECT_ROBOTS_TXT=true

# RSS Feed Settings
RSS_FETCH_INTERVAL=3600
RSS_MAX_ITEMS_PER_FEED=50
RSS_TIMEOUT=15

# API Rate Limits (requests per minute)
WECHAT_RATE_LIMIT=10
BILIBILI_RATE_LIMIT=30
YOUTUBE_RATE_LIMIT=100
TWITTER_RATE_LIMIT=15
WEIBO_RATE_LIMIT=20
ZHIHU_RATE_LIMIT=30

# Third-party API Keys (Optional)
# WeChat
WECHAT_APP_ID=
WECHAT_APP_SECRET=

# Bilibili
BILIBILI_SESSDATA=
BILIBILI_BILI_JCT=

# YouTube
YOUTUBE_API_KEY=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=

# Twitter/X
TWITTER_BEARER_TOKEN=
TWITTER_API_KEY=
TWITTER_API_SECRET=

# Weibo
WEIBO_APP_KEY=
WEIBO_APP_SECRET=

# Zhihu
ZHIHU_API_KEY=

# Email Configuration (for notifications)
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@attentionsync.io
SMTP_USE_TLS=true

# Webhook Configuration
WEBHOOK_ENABLED=false
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_TIMEOUT=10

# Monitoring and Analytics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=false
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Sentry Error Tracking (Optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Feature Flags
FEATURE_SEMANTIC_SEARCH=true
FEATURE_AUDIO_TRANSCRIPTION=true
FEATURE_VIDEO_TRANSCRIPTION=true
FEATURE_IMAGE_OCR=true
FEATURE_WEEKLY_REPORT=true
FEATURE_EXPORT=true
FEATURE_TEAM_COLLABORATION=false

# Performance Tuning
CACHE_TTL=3600
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
WORKER_CONCURRENCY=4
WORKER_MAX_TASKS_PER_CHILD=1000

# Privacy and Compliance
DATA_RETENTION_DAYS=90
ENABLE_AUDIT_LOG=true
ENABLE_DATA_ENCRYPTION=false
GDPR_COMPLIANCE=false
DELETE_USER_DATA_ON_REQUEST=true

# Docker Compose Specific
COMPOSE_PROJECT_NAME=attentionsync
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# Development Tools
JUPYTER_PORT=8888
JUPYTER_TOKEN=development-only-token

# Backup Configuration
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=
BACKUP_S3_PREFIX=backups/

# ============================================
# PRODUCTION CHECKLIST
# ============================================
# 1. Generate strong SECRET_KEY and JWT_SECRET
# 2. Update all passwords (POSTGRES, REDIS, MINIO, etc.)
# 3. Configure proper CORS_ORIGINS
# 4. Set ENVIRONMENT=production
# 5. Enable HTTPS in nginx
# 6. Configure proper backup strategy
# 7. Set up monitoring (Prometheus/Grafana)
# 8. Configure error tracking (Sentry)
# 9. Review rate limits
# 10. Enable audit logging